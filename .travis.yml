sudo: false
language: ruby
rvm:
  - jruby-9.1.9.0
  - jruby-1.7.26
jdk:
  - oraclejdk8
  - openjdk7
  - oraclejdk7
  - openjdk6

matrix:
  exclude:
    - rvm: jruby-9.1.9.0
      jdk: openjdk6
cache: bundler
env:
  JDK_VERSION_FOR_CODECLIMATE: oraclejdk8
  JRUBY_OPTS: "--debug"
before_script:
  - if [ "$TRAVIS_JDK_VERSION" = "$JDK_VERSION_FOR_CODECLIMATE" ]; then curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter; chmod +x ./cc-test-reporter; fi
script:
  - bundle exec rspec
  - if [ "$TRAVIS_PULL_REQUEST" = "false" && "$TRAVIS_JDK_VERSION" = "$JDK_VERSION_FOR_CODECLIMATE" ]; then ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT; fi

